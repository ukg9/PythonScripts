import pandas as pd
import matplotlib.pyplot as plt

# Load your dataset
df = pd.read_csv('your_dataset.csv')

# Ensure TIBYear_D&B is treated as a datetime format (if applicable)
df['TIBYear_D&B'] = pd.to_datetime(df['TIBYear_D&B'], format='%Y')  # Adjust the format as necessary

# Set TIBYear_D&B as the index for time series analysis
df.set_index('TIBYear_D&B', inplace=True)

# 1. Line plot for trend analysis
plt.figure(figsize=(10, 6))
df['TotalEmployees_D&B'].plot()
plt.title('Trend of Total Employees Over Time (TIBYear_D&B)')
plt.xlabel('TIBYear_D&B')
plt.ylabel('Total Employees')
plt.show()

# 2. Rolling average to smoothen the data and show long-term trends
df['Rolling_Avg'] = df['TotalEmployees_D&B'].rolling(window=12).mean()

plt.figure(figsize=(10, 6))
df[['TotalEmployees_D&B', 'Rolling_Avg']].plot()
plt.title('Total Employees with Rolling Average (12-month window)')
plt.xlabel('TIBYear_D&B')
plt.ylabel('Total Employees')
plt.show()

# 3. Resample the data to find yearly trends (if TIBYear_D&B is in a finer time format)
df_yearly = df.resample('Y').mean()

plt.figure(figsize=(10, 6))
df_yearly['TotalEmployees_D&B'].plot()
plt.title('Yearly Average of Total Employees (TIBYear_D&B)')
plt.xlabel('Year')
plt.ylabel('Total Employees')
plt.show()
